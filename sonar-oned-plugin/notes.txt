to run in test environment, run 

To package the plugin jar, use mvn package

To test the plugin quickly, use:

For sonar 3.7.3 and lower use
mvn install org.codehaus.sonar:sonar-dev-maven-plugin:1.7:start-war -Dsonarqube.runtimeVersion=3.7.3

This will deply a sonarqube under port 9000 as a child process of the maven process.

For sonarqube use, install a sonarqube dist. Update the conf/sonar.properties, add sonar.web.dev=true and run it
mvn install org.codehaus.sonar:sonar-dev-maven-plugin:1.8:upload -DsonarHome=/Users/fhernandez/Documents/sonarqube-4.5.2 -DsonarUrl=http://localhost:9000

Once ready, just launch a SonarQube analysis, either using SonarQube Maven plug-in or 
using SonarQube Runner standalone analysis. The analysis will connect by default to 
the server in development mode and run your plug-in as part of the analysis process.

Actual error:

[ERROR] Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.7.1:sonar (default-cli) on project spring-jpa-hibernate-example: Fail to decorate 'org.sonar.api.resources.File@786a7b[key=src/test/java/org/onuba/example/facade/test/StockFacadeImplTest.java,deprecatedKey=org.onuba.example.facade.test.StockFacadeImplTest,path=src/test/java/org/onuba/example/facade/test/StockFacadeImplTest.java,dir=org/onuba/example/facade/test,filename=StockFacadeImplTest.java,language=Java]': NullPointerException -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.7.1:sonar (default-cli) on project spring-jpa-hibernate-example: Fail to decorate 'org.sonar.api.resources.File@786a7b[key=src/test/java/org/onuba/example/facade/test/StockFacadeImplTest.java,deprecatedKey=org.onuba.example.facade.test.StockFacadeImplTest,path=src/test/java/org/onuba/example/facade/test/StockFacadeImplTest.java,dir=org/onuba/example/facade/test,filename=StockFacadeImplTest.java,language=Java]'
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:216)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:108)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:76)
	at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:116)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:361)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:155)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:584)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:213)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:157)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)
Caused by: org.apache.maven.plugin.MojoExecutionException: Fail to decorate 'org.sonar.api.resources.File@786a7b[key=src/test/java/org/onuba/example/facade/test/StockFacadeImplTest.java,deprecatedKey=org.onuba.example.facade.test.StockFacadeImplTest,path=src/test/java/org/onuba/example/facade/test/StockFacadeImplTest.java,dir=org/onuba/example/facade/test,filename=StockFacadeImplTest.java,language=Java]'
	at org.codehaus.mojo.sonar.bootstrap.ExceptionHandling.handle(ExceptionHandling.java:41)
	at org.codehaus.mojo.sonar.bootstrap.RunnerBootstrapper.execute(RunnerBootstrapper.java:104)
	at org.codehaus.mojo.sonar.SonarMojo.execute(SonarMojo.java:135)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:133)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)
	... 19 more
Caused by: org.sonar.api.utils.SonarException: Fail to decorate 'org.sonar.api.resources.File@786a7b[key=src/test/java/org/onuba/example/facade/test/StockFacadeImplTest.java,deprecatedKey=org.onuba.example.facade.test.StockFacadeImplTest,path=src/test/java/org/onuba/example/facade/test/StockFacadeImplTest.java,dir=org/onuba/example/facade/test,filename=StockFacadeImplTest.java,language=Java]'
	at org.sonar.batch.phases.DecoratorsExecutor.executeDecorator(DecoratorsExecutor.java:103)
	at org.sonar.batch.phases.DecoratorsExecutor.decorateResource(DecoratorsExecutor.java:86)
	at org.sonar.batch.phases.DecoratorsExecutor.decorateResource(DecoratorsExecutor.java:78)
	at org.sonar.batch.phases.DecoratorsExecutor.decorateResource(DecoratorsExecutor.java:78)
	at org.sonar.batch.phases.DecoratorsExecutor.execute(DecoratorsExecutor.java:70)
	at org.sonar.batch.phases.PhaseExecutor.execute(PhaseExecutor.java:123)
	at org.sonar.batch.scan.ModuleScanContainer.doAfterStart(ModuleScanContainer.java:194)
	at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:93)
	at org.sonar.api.platform.ComponentContainer.execute(ComponentContainer.java:78)
	at org.sonar.batch.scan.ProjectScanContainer.scan(ProjectScanContainer.java:233)
	at org.sonar.batch.scan.ProjectScanContainer.scanRecursively(ProjectScanContainer.java:228)
	at org.sonar.batch.scan.ProjectScanContainer.doAfterStart(ProjectScanContainer.java:221)
	at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:93)
	at org.sonar.api.platform.ComponentContainer.execute(ComponentContainer.java:78)
	at org.sonar.batch.scan.ScanTask.scan(ScanTask.java:64)
	at org.sonar.batch.scan.ScanTask.execute(ScanTask.java:51)
	at org.sonar.batch.bootstrap.TaskContainer.doAfterStart(TaskContainer.java:125)
	at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:93)
	at org.sonar.api.platform.ComponentContainer.execute(ComponentContainer.java:78)
	at org.sonar.batch.bootstrap.BootstrapContainer.executeTask(BootstrapContainer.java:173)
	at org.sonar.batch.bootstrapper.Batch.executeTask(Batch.java:95)
	at org.sonar.batch.bootstrapper.Batch.execute(Batch.java:67)
	at org.sonar.runner.batch.BatchIsolatedLauncher.executeOldVersion(BatchIsolatedLauncher.java:92)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.sonar.runner.impl.IsolatedLauncherProxy.invoke(IsolatedLauncherProxy.java:61)
	at com.sun.proxy.$Proxy20.executeOldVersion(Unknown Source)
	at org.sonar.runner.api.EmbeddedRunner.doExecute(EmbeddedRunner.java:284)
	at org.sonar.runner.api.EmbeddedRunner.runAnalysis(EmbeddedRunner.java:166)
	at org.sonar.runner.api.EmbeddedRunner.runAnalysis(EmbeddedRunner.java:153)
	at org.codehaus.mojo.sonar.bootstrap.RunnerBootstrapper.execute(RunnerBootstrapper.java:99)
	... 22 more
Caused by: java.lang.NullPointerException
	at org.sonarsource.escoem.OnedFileDecorator.decorate(OnedFileDecorator.java:34)
	at org.sonar.batch.phases.DecoratorsExecutor.executeDecorator(DecoratorsExecutor.java:95)
	... 54 more